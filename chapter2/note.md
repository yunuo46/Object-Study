## 영화 예매 시스템

영화와 상영이라는 용어를 구분해야한다.

영화 = 영화에 대한 기본 정보

상영 = 실제로 관객들이 영화를 관람하는 사건

따라서 관객은 실제로는 ‘상영’을 예약하는 것이다

### 객체지향 프로그래밍

1. 어떤 클래스가 필요한지 고민하기 전에 어떤 객체들이 필요한지 고민하라
2. 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐라

> 객체들의 모양과 윤곽이 잡히면 공통된 특성과 상태를 가진 객체들을 타입으로 분류하고 이 타입을 기반으로 클래스를 구현하라. 훌륭한 협력이 훌륭한 객체를 낳고 훌륭한 객체가 훌륭한 클래스를 낳는다.
>

### 도메인

도메인 :  문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야

### 메세지와 메서드

메세지 = 다른 객체와 상호작용하는 방법

메서드 = 수신된 메세지를 처리하기 위한 자신만의 방법

→ 다형성의 개념의 출발점!

## 상속과 다형성

Movie 클래스 어디에서도 할인 정책이 무엇인 지 판단하지 않는다. 조건문이 있는 것도 아니지만 상속과 다형성을 이용해 특정한 조건을 선택적으로 실행할 수 있다!

### 컴파일 시간 의존성과 실행 시간 의존성

컴파일 시간에는 추상 메서드(DiscountPolicy)에 의존하지만, 실행 시간에는 AmountDiscountPolicy나 PercentDiscountPolicy의 인스턴스에 의존한다.

하지만, 이렇게 의존성이 다를 수록 코드를 이해하기가 어렵다. 유연해지고 확장가능한 것과의 트레이드 오프라는 사실!

> 상속은 구현 상속이 아니라 인터페이스 상속을 위해 사용해야 한다. 대부분의 사람들은 코드 재사용을 상속의 주된 목적이라고 생각하지만 이것은 오해다. 인터페이스를 재사용할 목적이 아니라 구현을 재사용할 목적으로 상속을 사용하면 변경에 취약한 코드를 낳게 될 확률이 높다
>

### 책임의 위치를 결정하자

할인 정책이 없는 경우를 조건문으로 처리하는 건 좋지 않은 선택이다

예외케이스를 최소화하고 일관성을 유지하자

→ NoneDiscountPoicy 클래스를 추가

### 추상 클래스 vs 인터페이스

이상적으로는 인터페이스를 사용하도록 변경한 설계가 더 좋다. 하지만 현실적으로는 NoneDiscountPolicy만을 위해 인터페이스를 추가하는 것이 과할 수도 있음

→ trade-off

### 상속 vs 합성

상속의 단점

1. 캡슐화를 위반한다

   부모 클래스의 내부 구조를 잘 알고 있어야한다. AmountDiscountMovie와 PercentDiscountMovie를 구현하는 개발자는 부모 클래스인 Movie의 calculateMovieFee 메서드 안에서 추상 메서드인 getDiscountAmount 메서드를 호출한다는 사실을 알고 있어야 한다.

   즉, 부모 클래스를 변경할 때, 자식 클래스도 함께 변경될 확률을 높인다.

2. 설계를 유연하지 못하게 만든다.